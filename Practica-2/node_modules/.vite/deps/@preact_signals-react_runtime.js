import {
  E,
  d,
  require_shim,
  u,
  w
} from "./chunk-OJJ2YV7R.js";
import {
  require_react
} from "./chunk-IF5A3MEL.js";
import {
  __toESM
} from "./chunk-547O27LD.js";

// node_modules/@preact/signals-react/runtime/dist/runtime.module.js
var import_react = __toESM(require_react());
var import_shim = __toESM(require_shim());
var s = import_react.version.split(".").map(Number)[0];
var l = [];
var v = Symbol.for(s >= 19 ? "react.transitional.element" : "react.element");
function d2(t) {
  if ("function" != typeof t) return t;
  else return function(r, i) {
    if ("string" == typeof r && i) for (var e2 in i) {
      var o2 = i[e2];
      if ("children" !== e2 && o2 instanceof u) i[e2] = o2.value;
    }
    return t.call.apply(t, [t, r, i].concat([].slice.call(arguments, 2)));
  };
}
var p;
var m = Symbol.dispose || Symbol.for("Symbol.dispose");
function b(n, t) {
  var r = t.effect.S();
  p = t;
  return y.bind(t, n, r);
}
function y(n, t) {
  t();
  p = n;
}
var g;
var h;
var _ = function() {
};
var S = ((g = { o: 0, effect: { s: void 0, c: function() {
}, S: function() {
  return _;
}, d: function() {
} }, subscribe: function() {
  return _;
}, getSnapshot: function() {
  return 0;
}, S: function() {
}, f: function() {
} })[m] = function() {
}, g);
var w2 = Promise.prototype.then.bind(Promise.resolve());
function x() {
  if (!h) h = w2(j);
}
function j() {
  var n;
  h = void 0;
  null == (n = p) || n.f();
}
var P = "undefined" != typeof window ? import_react.useLayoutEffect : import_react.useEffect;
function $(n) {
  if (void 0 === n) n = 0;
  x();
  var t = (0, import_react.useRef)();
  if (null == t.current) if ("undefined" == typeof window) t.current = S;
  else t.current = function(n2) {
    var t2, r2, e2, o2, u3 = 0, f2 = E(function() {
      r2 = this;
    });
    r2.c = function() {
      u3 = u3 + 1 | 0;
      if (o2) o2();
    };
    return (t2 = { o: n2, effect: r2, subscribe: function(n3) {
      o2 = n3;
      return function() {
        u3 = u3 + 1 | 0;
        o2 = void 0;
        f2();
      };
    }, getSnapshot: function() {
      return u3;
    }, S: function() {
      if (null != p) {
        var n3 = p.o, t3 = this.o;
        if (0 == n3 && 0 == t3 || 0 == n3 && 1 == t3) {
          p.f();
          e2 = b(void 0, this);
        } else if (1 == n3 && 0 == t3 || 2 == n3 && 0 == t3) ;
        else e2 = b(p, this);
      } else e2 = b(void 0, this);
    }, f: function() {
      var n3 = e2;
      e2 = void 0;
      null == n3 || n3();
    } })[m] = function() {
      this.f();
    }, t2;
  }(n);
  var r = t.current;
  (0, import_shim.useSyncExternalStore)(r.subscribe, r.getSnapshot, r.getSnapshot);
  r.S();
  if (0 === n) P(j);
  return r;
}
Object.defineProperties(u.prototype, { $$typeof: { configurable: true, value: v }, type: { configurable: true, value: function(n) {
  var t = n.data, r = $(1);
  try {
    return t.value;
  } finally {
    r.f();
  }
} }, props: { configurable: true, get: function() {
  return { data: this };
} }, ref: { configurable: true, value: null } });
function k(n) {
  return $(n);
}
function useSignal(n) {
  return (0, import_react.useMemo)(function() {
    return d(n);
  }, l);
}
function useComputed(n) {
  var t = (0, import_react.useRef)(n);
  t.current = n;
  return (0, import_react.useMemo)(function() {
    return w(function() {
      return t.current();
    });
  }, l);
}
function useSignalEffect(n) {
  var t = (0, import_react.useRef)(n);
  t.current = n;
  (0, import_react.useEffect)(function() {
    return E(function() {
      return t.current();
    });
  }, l);
}
export {
  $ as _useSignalsImplementation,
  x as ensureFinalCleanup,
  useComputed,
  useSignal,
  useSignalEffect,
  k as useSignals,
  d2 as wrapJsx
};
//# sourceMappingURL=@preact_signals-react_runtime.js.map
